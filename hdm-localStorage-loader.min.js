/*
 * HDM mobile localStorage loader
 *
 *  Copyright (c) 2011 achoi@hearst.com
 *  
 *  yo that MIT license took a LOT of space!
 *  I've removed it. Anyways, yeah MIT license. 
 *
 *  https://github.com/ayc/HDM-mobile-localStorage-loader 
 */
(function(){function hget(){return document.getElementsByTagName("head")[0]||document.documentElement}function tget(a){return document.getElementsByTagName(a)}function simpleget(a,b){var c=new XMLHttpRequest();c.open('GET',a,false);c.send(null);if(c.status===200){try{b(c.responseText)}catch(e){throw("[simpleget] execute failed! "+e+"\n\n"+b);}}}function addcss(a){var b=document.createElement("STYLE");var c=hget();b.textContent=a;c.appendChild(b)}function addscript(a){var b=document.createElement("SCRIPT");var c=hget();b.textContent=a;c.appendChild(b)}function checkForKey(a,b){var c=[];var d=null;var e=localStorage.length;var i;for(i=0;i<e;i++){var f=localStorage.key(i);if(a===f.split("#")[0]){if((a+"#"+b)===(f)){d=f}else{c.push(f)}}}for(i=0;i<c.length;i++){localStorage.removeItem(c[i])}return d}function graburi(b,c){var d=document.getElementsByTagName("meta");var e=[];var i;for(i=0;i<d.length;i++){var f=d[i].getAttribute("name");if(!f)continue;var g="localStorage:"+b;if(f.toUpperCase()===g.toUpperCase()){var h=d[i].getAttribute("content").split("#");var j=h[0];var k=h[1];var l=checkForKey(j,k);if(!!l){c(localStorage.getItem(l))}else{simpleget(j,function(a){localStorage.setItem(j+"#"+k,a);c(a)})}}}}graburi("javascript",addscript);graburi("stylesheet",addcss)}());